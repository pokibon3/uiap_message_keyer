# UIAP Message Keyer (CH32V003)

OLED表示、メッセージ自動送信/録音、CWデコード表示を備えたCWキーヤー。

## 仕様
- パドル打鍵（DOT/DASH）、スピード速度可変（5〜40 WPM）。スピードはOLEDに表示します。
- メッセージA/Bの自動送信（単発/リピート）。
- フラッシュへのオンデバイス録音（2スロット、各最大255バイト）。
- OLED表示（ヘッダ + 文字列のスクロール表示）。
- CWデコード表示（欧文/和文対応）。

## ハードウェア
- MCU: UIAPduino CH32V003F4U6
- OLED: SSD1306 I2C 128x64
- パドル入力 + SW-A/SW-Bスイッチ
- サイドトーン出力/KEY出力

## 操作方法
### 通常モード（起動直後）
- `SW-A`短押し: メッセージAを1回送信。
- `SW-B`短押し: メッセージBを1回送信。
- `SW-A`長押し（約1.5s）: メッセージAをリピート送信。
- `SW-B`長押し（約1.5s）: メッセージBをリピート送信。
- 自動送信中にパドル操作すると停止。

### メッセージ記録モード
- `SW-A + SW-B`同時長押し（約1.5s）で記録モードの開始・終了。
  - 開始: 2回ビープ。
  - 終了: 4回ビープ。
- 記録スロット選択:
  - `SW-A`でメッセージA録音開始。
  - `SW-B`でメッセージB録音開始。
- 記録中:
  - 同じスイッチを押すと確定保存。
  - もう一方のスイッチを押すとキャンセル。

　※ 記録モード開始後はパドル入力が可能ですが、記録スロットの選択スイッチを押した時点から記録が開始されます。誤入力した場合は、もう一方のスイッチを押すことによりキャンセルできます。  

## CWデコード機能
- パドル入力を解析し、文字コードに変換します（欧文/和文対応）。  
- 起動直後の学習初期値は20WPMです。
- 半角カタカナ（0xA1-0xDF）は和文として扱います。
- ホレ/ラタの制御は2バイトの組み合わせで判定します。

## 開発環境
- Visual Studio CodeとPlatformIO環境が必要です。  